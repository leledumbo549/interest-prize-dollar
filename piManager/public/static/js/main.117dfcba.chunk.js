(this["webpackJsonppohon-emas-app"]=this["webpackJsonppohon-emas-app"]||[]).push([[0],{282:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}]')},385:function(e,t,n){e.exports=n(694)},390:function(e,t,n){},546:function(e,t){},571:function(e,t){},573:function(e,t){},588:function(e,t){},590:function(e,t){},688:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"v1","type":"address"},{"internalType":"address","name":"v2","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"constant":false,"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"swapToV1","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"swapToV2","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"tokenV1","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"tokenV2","outputs":[{"internalType":"address","name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"}]')},689:function(e){e.exports=JSON.parse('[{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"refresh","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"sendInterestToConflux","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"addr","type":"address"}],"name":"setNewPoolPrizeAddress","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"constant":false,"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"unwrap","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"address","name":"receiver","type":"address"}],"name":"wrap","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"baseTokenBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getInterest","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"getTotalDeposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"interestTokenBalance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}]')},694:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(78),u=n.n(s),l=(n(390),n(5)),i=n.n(l),c=n(14),o=n(2),p=n(4),d=n(7),f=n(8),m=n(61),y=n(13),b=n(151),h=n(30),v=n(99),w=n(319),x=n.n(w),k=(n(511),new(function(){function e(){Object(o.a)(this,e)}return Object(p.a)(e,[{key:"showToast",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x()({text:t}).showToast();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"delay",value:function(){var e=Object(c.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){setTimeout((function(){e()}),t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLogger",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",console);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getStorageValue",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.localStorage.getItem(t),e.next=3,this.delay(1e3);case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setStorageValue",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.localStorage.setItem(t,n),e.next=3,this.delay(1e3);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"clearStorageValue",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.clear();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"openUrl",value:function(e){window.open(e,"_blank").focus()}}]),e}())),E=n(16),g=n(98),S=n.n(g),T=(new function e(){Object(o.a)(this,e)},n(513),n(320)),D=n.n(T),I=n(530),O=n(98),U="0x817F3129c3D8E773025f58e013b7546fe89790C6",N=n(282),A=n(688);var j=new(function(){function e(){Object(o.a)(this,e),this.addressCPIUSD="0x8a1cacfc644a88d371517262d030b06bb43a3a2d",this.addressCPIUSDV2="0x8961A4a15DBE65e742097CCcB87c1863e22e07EC",this.addressCALINK="0x86cca06c660ad995d4ecd49be9bbdd8113fdefca"}return Object(p.a)(e,[{key:"start",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,r,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.conflux){e.next=2;break}throw Error("no wallet");case 2:return e.next=4,conflux.enable();case 4:return t=e.sent,n=t[0],this.address=n,e.next=9,I.getUserReceiveWalletEth(n,"0x0000000000000000000000000000000000000000","http://23.102.224.244:8101");case 9:a=e.sent,this.shuttleflowAddress=a,r=confluxJS.Contract({abi:N,address:"0x8a1cacfc644a88d371517262d030b06bb43a3a2d"}),s=confluxJS.Contract({abi:N,address:"0x8961A4a15DBE65e742097CCcB87c1863e22e07EC"}),u=confluxJS.Contract({abi:N,address:"0x86cca06c660ad995d4ecd49be9bbdd8113fdefca"}),l=confluxJS.Contract({abi:A,address:U}),this.cpiUSD=r,this.cpiUSDv2=s,this.caLINK=u,this.tokenSwapper=l;case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAddress",value:function(){return this.address}},{key:"stat",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,r,s,u,l,c,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.address){e.next=2;break}return e.abrupt("return",{});case 2:return console.log("retrieve conflux wallet stat"),t=this.cpiUSD,n=this.cpiUSDv2,a=this.caLINK,r=this.address,console.log("get cpiUSD balance.."),e.next=10,t.balanceOf(r);case 10:return s=e.sent,console.log("get cpiUSDv2 balance.."),e.next=14,n.balanceOf(r);case 14:return u=e.sent,console.log("get caLINK balance.."),e.next=18,a.balanceOf(r);case 18:return l=e.sent,e.next=21,t.allowance(r,U);case 21:return c=e.sent,i=c.toString(),c=O.BigNumber.from(i),o=c.gte("100000000000000000000000000000000000000000000000000000000000000000000000000000"),e.abrupt("return",{balance_cpiUSD:s.toString(),balance_cpiUSDv2:u.toString(),balance_caLINK:l.toString(),allowance_cpiUSD_tokenswapper:o});case 25:case"end":return e.stop()}var i}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"approve",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"115792089237316195423570985008687907853269984665640564039457584007913129639935",e.next=3,this.cpiUSD.approve(U,"115792089237316195423570985008687907853269984665640564039457584007913129639935").sendTransaction({from:this.address});case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"swapToV2",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("get cpiUSD balance.."),e.next=3,this.cpiUSD.balanceOf(this.address);case 3:return t=e.sent,n=t.toString(),console.log("swapping "+n),e.next=8,this.tokenSwapper.swapToV2(n).sendTransaction({from:this.address});case 8:return a=e.sent,e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}()),L=n(98),C="0x35d70a7fcdb1cf4d2b40aba7ae517f81d0f74bf4",M="0xAD5ce863aE3E4E9394Ab43d4ba0D80f419F61789",K=n(282),P=n(689),_=new(function(){function e(){Object(o.a)(this,e),this.addressPIUSD=C,this.addressLINK=M}return Object(p.a)(e,[{key:"start",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,r,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=2;break}throw Error("no wallet");case 2:return e.next=4,window.ethereum.enable();case 4:return t=new L.providers.Web3Provider(window.ethereum),n=t.getSigner(),e.next=8,n.getAddress();case 8:a=e.sent,r=new L.Contract(C,P,n),s=new L.Contract(M,K,n),this.address=a,this.piUSD=r,this.LINK=s;case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAddress",value:function(){return this.address}},{key:"stat",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,r,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.address){e.next=2;break}return e.abrupt("return",{});case 2:return t=this.piUSD,n=this.LINK,a=this.address,e.next=7,t.balanceOf(a);case 7:return r=e.sent,e.next=10,n.balanceOf(a);case 10:return s=e.sent,e.next=13,n.allowance(a,C);case 13:return u=e.sent,l=u.gte("100000000000000000000000000000000000000000000000000000000000000000000000000000"),e.abrupt("return",{balance_piUSD:r.toString(),balance_LINK:s.toString(),allowance_LINK:l});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPiUSDBalance",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.piUSD.balanceOf(t);case 2:return n=e.sent,e.abrupt("return",n.toString());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"approve",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"115792089237316195423570985008687907853269984665640564039457584007913129639935",e.next=3,this.LINK.approve(C,"115792089237316195423570985008687907853269984665640564039457584007913129639935");case 3:return t=e.sent,e.next=6,t.wait();case 6:return e.abrupt("return",t.hash);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"wrap",value:function(){var e=Object(c.a)(i.a.mark((function e(t,n){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log({amount:t,receiver:n}),e.next=3,this.piUSD.wrap(t,n);case 3:return a=e.sent,e.next=6,a.wait();case 6:return e.abrupt("return",a.hash);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unwrap",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.piUSD.unwrap(t);case 2:return n=e.sent,e.next=5,n.wait();case 5:return e.abrupt("return",n.hash);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());function R(e){return e?S.a.utils.formatEther(e):"0.0"}function V(e){return S.a.utils.parseEther(e).toString()}var W=function(){function e(){var t=this;Object(o.a)(this,e),this.busy=!1,this.data={},this.managerData={},this.tickerBusy=!1,this.getManagerData(),setInterval((function(){return t.ticker()}),1e3)}return Object(p.a)(e,[{key:"ticker",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.tickerBusy){e.next=2;break}return e.abrupt("return");case 2:return this.tickerBusy=!0,e.prev=3,e.next=6,this.getManagerData();case 6:return e.next=8,k.delay(3e3);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error(e.t0);case 13:this.tickerBusy=!1;case 14:case"end":return e.stop()}}),e,this,[[3,10]])})));return function(){return e.apply(this,arguments)}}()},{key:"login",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.start();case 3:return e.next=5,_.start();case 5:return e.next=7,this.getData();case 7:e.next=13;break;case 9:throw e.prev=9,e.t0=e.catch(0),console.error(e.t0),e.t0;case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,r,s,u,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.getAddress(),e.next=3,j.stat();case 3:return n=e.sent,a=_.getAddress(),e.next=7,_.stat();case 7:if(r=e.sent,!(u=j.shuttleflowAddress)){e.next=14;break}return e.next=12,_.getPiUSDBalance(u);case 12:s=R(s=e.sent);case 14:l={addressCPIUSD:j.addressCPIUSD,addressCPIUSDV2:j.addressCPIUSDV2,addressCALINK:j.addressCALINK,cfxAddress:t,balance_cpiUSD:R(n.balance_cpiUSD),balance_cpiUSDv2:R(n.balance_cpiUSDv2),balance_caLINK:R(n.balance_caLINK),addressPIUSD:_.addressPIUSD,addressLINK:_.addressLINK,ethAddress:a,balance_piUSD:R(r.balance_piUSD),balance_LINK:R(r.balance_LINK),allowance_LINK:r.allowance_LINK,balance_piUSD_shuttleflow:s,shuttleflowAddress:u,allowance_cpiUSD_tokenswapper:n.allowance_cpiUSD_tokenswapper},console.log(l),this.data=l;case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getManagerData",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n,a,r,s,u,l,c,o,p,d,f,m,y,b,h,v,w,x,k,E,g;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,D.a.get("/stat");case 3:if(t=e.sent,(n=t.data).prizeSymbol){e.next=7;break}throw"wrong format";case 7:for(m in a=n.interestAccumulated,r=n.slotsCount,s=n.lastWinner,u=n.atokenBalanceLocked,l=n.deposit,c=n.interestNotSent,o=n.aLINKinShuttleflow,p=n.managerShuttleflowAddress,d=n.chance,f=[],d)d.hasOwnProperty(m)&&(y=d[m],f.push({address:m,txTimes:y}));b=n.history,h=[],v=0;case 21:if(!(v<b.length)){e.next=29;break}if(w=b[v],5!=v){e.next=25;break}return e.abrupt("break",29);case 25:h.push({txHash:w.txHash,winner:w.winner,prize:w.prize});case 26:v++,e.next=21;break;case 29:x=n.sendToConfluxTxs,k=[],E=0;case 32:if(!(E<x.length)){e.next=40;break}if(g=x[E],5!=E){e.next=36;break}return e.abrupt("break",40);case 36:k.push({txHash:g.txHash,amount:g.amount});case 37:E++,e.next=32;break;case 40:this.managerData={interestAccumulated:a,spendingRecorded:r,lastWinner:s,atokenLocked:u,collateral:l,atokenInterest:c,atokenInShuttleflow:o,spendingRecs:f,winners:h,interestTxs:k,managerShuttleflowAddress:p},console.log(this.managerData),e.next=47;break;case 44:e.prev=44,e.t0=e.catch(0),console.error(e.t0);case 47:case"end":return e.stop()}}),e,this,[[0,44]])})));return function(){return e.apply(this,arguments)}}()},{key:"approve",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.approve();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"mintPiUSDToConflux",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j.shuttleflowAddress,e.next=3,_.wrap(V(t),n);case 3:return a=e.sent,e.next=6,this.getData();case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"mintPiUSDToEth",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.getAddress(),e.next=3,_.wrap(V(t),n);case 3:return a=e.sent,e.next=6,this.getData();case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"redeemPiUSD",value:function(){var e=Object(c.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.unwrap(V(t));case 2:return n=e.sent,e.next=5,this.getData();case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"approveTokenSwap",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.approve();case 2:return t=e.sent,e.next=5,this.getData();case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"tokenSwap",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.swapToV2();case 2:return t=e.sent,e.next=5,this.getData();case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();Object(E.h)(W,{busy:E.m,data:E.m,managerData:E.m});var B=new W,J=n(194),H=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={show:"busy"},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.login();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),this.setState({show:"login"});case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){}},{key:"login",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,this.setState({show:"busy"}),e.next=4,B.login();case 4:if(B.data.allowance_LINK){e.next=6;break}return e.abrupt("return",this.setState({show:"askApproval"}));case 6:this.props.onLoggedIn(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),this.setState({show:"login"});case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"approve",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.approve();case 3:e.sent,this.props.onLoggedIn(),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),this.setState({show:"askApproval"});case 11:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"renderLogin",value:function(){var e=this,t=r.a.createElement(J.a,null);return"login"===this.state.show&&(t=r.a.createElement(h.a,{title:"CONNECT",type:"outline",raised:!0,onPress:function(){return e.login()}})),r.a.createElement(y.a,{style:{alignItems:"center"}},r.a.createElement("pre",{style:{textAlign:"center"}},"open this page in chrome",r.a.createElement("br",null),"and ensure metamask and confluxportal installed"),r.a.createElement(h.b,null," "),t)}},{key:"renderAskApproval",value:function(){var e=this;return r.a.createElement(y.a,{style:{alignItems:"center"}},r.a.createElement("pre",{style:{textAlign:"center"}},"please approve piUSD to spend LINK",r.a.createElement("br",null),"we use LINK as subtitute stable token like DAI or USDC"),r.a.createElement(h.b,null," "),r.a.createElement(h.a,{title:"OKAY",type:"outline",raised:!0,onPress:function(){return e.approve()}}))}},{key:"render",value:function(){var e=this.renderLogin();return"askApproval"===this.state.show&&(e=this.renderAskApproval()),r.a.createElement(y.a,{style:{padding:10}},e)}}]),n}(r.a.Component),z=Object(v.a)(H),F=n(196),q=n(286),X=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={show:"busy",mintTo:"conflux",amount:"",mode:"mint"},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){}},{key:"mint",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t="conflux"===this.state.mintTo,n=this.state.amount,!t){e.next=8;break}return e.next=6,B.mintPiUSDToConflux(n);case 6:e.next=10;break;case 8:return e.next=10,B.mintPiUSDToEth(n);case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.error(e.t0);case 15:case"end":return e.stop()}}),e,this,[[0,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"redeem",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=this.state.amount,e.next=4,B.redeemPiUSD(t);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{key:"approveTokenSwap",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.approveTokenSwap();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"tokenSwap",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.tokenSwap();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.error(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}()},{key:"renderEth",value:function(){var e,t=this,n=B.data;return e="mint"===this.state.mode?r.a.createElement(y.a,null,r.a.createElement("pre",null,"enter amount LINK to be minted as piUSD"),r.a.createElement(F.a,{style:{borderWidth:1,borderColor:"gainsboro",padding:10},onChangeText:function(e){return t.setState({amount:e})},value:this.state.amount,placeholder:"ENTER AMOUNT"}),r.a.createElement("pre",{style:{textAlign:"center"}},"where piUSD to be minted"),r.a.createElement(q.a,{style:{borderWidth:1,borderColor:"gainsboro",padding:10},disabled:!1,selectedValue:this.state.mintTo,onValueChange:function(e){return t.setState({mintTo:e})}},r.a.createElement(q.a.Item,{label:"Conflux Network",value:"conflux"}),r.a.createElement(q.a.Item,{label:"Ethereum",value:"ethereum"})),r.a.createElement(h.b,null," "),r.a.createElement(h.a,{title:"MINT",type:"outline",raised:!0,onPress:function(){return t.mint()}})):r.a.createElement(y.a,null,r.a.createElement("pre",null,"enter amount piUSD to be redeemed back to LINK"),r.a.createElement(F.a,{style:{borderWidth:1,borderColor:"gainsboro",padding:10},onChangeText:function(e){return t.setState({amount:e})},value:this.state.amount,placeholder:"ENTER AMOUNT"}),r.a.createElement(h.b,null," "),r.a.createElement(h.a,{title:"REDEEM",type:"outline",raised:!0,onPress:function(){return t.redeem()}})),r.a.createElement(y.a,{style:{alignItems:"center"}},r.a.createElement("pre",{style:{textAlign:"center"}},"ETHEREUM",r.a.createElement("br",null),"wallet address: ",n.ethAddress,r.a.createElement("br",null),"LINK balance: ",n.balance_LINK,r.a.createElement("br",null),"piUSD balance: ",n.balance_piUSD,r.a.createElement("br",null),"LINK allowance: ",n.allowance_LINK?"true":"false",r.a.createElement("br",null),"shuttleflow address: ",n.shuttleflowAddress,r.a.createElement("br",null),"piUSD in shuttleflow: ",n.balance_piUSD_shuttleflow,r.a.createElement("br",null)),r.a.createElement(h.b,null," "),r.a.createElement(y.a,null,r.a.createElement("pre",{style:{textAlign:"center"}},"what do you want to do"),r.a.createElement(q.a,{style:{borderWidth:1,borderColor:"gainsboro",padding:10},disabled:!1,selectedValue:this.state.mode,onValueChange:function(e){return t.setState({mode:e})}},r.a.createElement(q.a.Item,{label:"Mint piUSD",value:"mint"}),r.a.createElement(q.a.Item,{label:"Redeem piUSD",value:"redeem"}))),r.a.createElement(h.b,null," "),e)}},{key:"renderCfx",value:function(){var e,t=this,n=B.data;return e=n.allowance_cpiUSD_tokenswapper?r.a.createElement(y.a,null,r.a.createElement(h.a,{title:"SWAP cpiUSD to cpiUSDv2",type:"outline",raised:!0,onPress:function(){return t.tokenSwap()}})):r.a.createElement(y.a,null,r.a.createElement(h.a,{title:"Approve Token Swapper",type:"outline",raised:!0,onPress:function(){return t.approveTokenSwap()}})),r.a.createElement(y.a,{style:{alignItems:"center"}},r.a.createElement("pre",{style:{textAlign:"center"}},"CONFLUX",r.a.createElement("br",null),"wallet address: ",n.cfxAddress,r.a.createElement("br",null),"caLINK balance: ",n.balance_caLINK,r.a.createElement("br",null),"cpiUSD balance: ",n.balance_cpiUSD,r.a.createElement("br",null),"cpiUSDv2 balance: ",n.balance_cpiUSDv2,r.a.createElement("br",null)),r.a.createElement(h.b,null," "),r.a.createElement("pre",{style:{textAlign:"center"}},"currently cpiUSD just a generic ERC777 token",r.a.createElement("br",null),"it must be swapped to cpiUSDv2 to have its spending recorded"),r.a.createElement(h.b,null," "),e,r.a.createElement("pre",{style:{textAlign:"center"}},"spend cpiUSDv2 to win interest accumulated prize",r.a.createElement("br",null),"the more you spend the more chance to win"))}},{key:"render",value:function(){return r.a.createElement(y.a,{style:{padding:10}},this.renderEth(),r.a.createElement(h.b,null," "),r.a.createElement(h.b,null," "),r.a.createElement(h.b,null," "),this.renderCfx(),r.a.createElement(h.b,null," "),r.a.createElement(h.b,null," "))}}]),n}(r.a.Component),Z=Object(v.a)(X),G=function(e){Object(f.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={loggedIn:!1,layoutHeight:0},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.getData();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){}},{key:"renderRequirements",value:function(){var e=B.data;return r.a.createElement("pre",{style:{overflowWrap:"anywhere"}},"REQUIREMENTS:",r.a.createElement("br",null),"1. install ",r.a.createElement("a",{target:"_blank",href:"https://metamask.io/"},"metamask")," and ",r.a.createElement("a",{target:"_blank",href:"https://portal.conflux-chain.org/"},"confluxportal"),r.a.createElement("br",null),"2. setup them to kovan & conflux testnet",r.a.createElement("br",null),"3. have eth & cfx testnet from faucet",r.a.createElement("br",null),"- hint: click deposit on metamask & confluxportal",r.a.createElement("br",null),"4. have some LINK from ",r.a.createElement("a",{target:"_blank",href:"https://testnet.aave.com/faucet"},"aave's faucet"),r.a.createElement("br",null),"- we will be used LINK as subtitute to USD stable token",r.a.createElement("br",null),"5. setup metamask to show LINK",r.a.createElement("br",null),"- LINK address is: ",e.addressLINK,r.a.createElement("br",null),"- PIUSD address is: ",e.addressPIUSD,r.a.createElement("br",null),"6. setup confluxportal to show caLINK & PIUSD",r.a.createElement("br",null),"- caLINK address is: ",e.addressCALINK,r.a.createElement("br",null),"- PIUSD address is: ",e.addressCPIUSDV2,r.a.createElement("br",null),"- fyi PIUSD is cpiUSDv2",r.a.createElement("br",null),"7. on failed tx, tried to increase gas & gas price",r.a.createElement("br",null),"8. refresh this page if needed",r.a.createElement("br",null))}},{key:"renderPoolStat",value:function(){var e=JSON.parse(JSON.stringify(B.managerData));console.log(e);var t=e.interestAccumulated,n=e.spendingRecorded,a=e.lastWinner,s=e.atokenLocked,u=e.collateral,l=e.atokenInterest,i=e.atokenInShuttleflow,c=e.managerShuttleflowAddress,o=e.spendingRecs?e.spendingRecs:[],p=e.winners?e.winners:[],d=e.interestTxs?e.interestTxs:[],f=null;return o.length>0&&(f=r.a.createElement(r.a.Fragment,null,"SPENDING RECORDS:",o.map((function(e,t){JSON.stringify(e);return r.a.createElement("pre",null,"address: ",e.address,r.a.createElement("br",null),"spend times: ",e.txTimes)})),r.a.createElement("br",null),r.a.createElement("br",null))),r.a.createElement("pre",null,"PRIZE STATS:",r.a.createElement("br",null),"prize: ",t," cALINK",r.a.createElement("br",null),"spending records: ",n,r.a.createElement("br",null),"last winner: ",a,r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("br",null),"PIUSD ETH STATS:",r.a.createElement("br",null),"total minted: ",u," PIUSD",r.a.createElement("br",null),"collateral: ",s," ALINK",r.a.createElement("br",null),"interest ready sent to shuttleflow: ",l," ALINK",r.a.createElement("br",null),"stuck in shuttleflow: ",i," ALINK",r.a.createElement("br",null),"manager shuttleflow address: ",c,r.a.createElement("br",null),r.a.createElement("br",null),f,"LAST 5 WINNERS:",r.a.createElement("br",null),"most spender in conflux",p.map((function(e,t){JSON.stringify(e);return r.a.createElement("pre",null,"txHash: ",e.txHash,r.a.createElement("br",null),"winner: ",e.winner,r.a.createElement("br",null),"prize: ",e.prize)})),r.a.createElement("br",null),"LAST 5 INTEREST TXS:",r.a.createElement("br",null),"send to conflux via shuttleflow",r.a.createElement("br",null),d.map((function(e,t){JSON.stringify(e);return r.a.createElement("pre",null,"txHash: ",e.txHash,r.a.createElement("br",null),"amount: ",e.amount," ALINK")})))}},{key:"render",value:function(){var e,t=this;return e=this.state.loggedIn?r.a.createElement(Z,null):r.a.createElement(z,{onLoggedIn:function(){return t.setState({loggedIn:!0})}}),r.a.createElement(y.a,{style:{flex:1,backgroundColor:"white"}},r.a.createElement(y.a,null,r.a.createElement("pre",{style:{textAlign:"center"}},"** PRIZE INTEREST DOLLAR **",r.a.createElement("br",null),"hmm maybe i cant sent myself 1 piUSD thousand times to have chance win the prize")),r.a.createElement(y.a,{style:{flex:1,flexDirection:"row"}},r.a.createElement(y.a,{style:{flex:1}},r.a.createElement(b.a,null,r.a.createElement(y.a,{style:{paddingHorizontal:20}},e))),r.a.createElement(y.a,{style:{flex:1,backgroundColor:"gainsboro"}},r.a.createElement(b.a,null,r.a.createElement(y.a,{style:{paddingHorizontal:20}},this.renderRequirements(),this.renderPoolStat())))))}}]),n}(r.a.Component),Q=Object(v.a)(G),Y=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={show:"busy",landscape:!1,w:m.a.get("window").width},n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(c.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=m.a.get("window").width,n=m.a.get("window").height,t>n&&this.setState({landscape:!0,w:n});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("style",{type:"text/css"},"\n          @font-face {\n            font-family: 'MaterialIcons';\n            src: url(".concat(n(690),") format('truetype');\n          }\n\n          @font-face {\n            font-family: 'FontAwesome';\n            src: url(").concat(n(691),") format('truetype');\n          }\n        ")),r.a.createElement(y.a,{style:{flex:1}},r.a.createElement(y.a,{style:{height:"100vh"}},r.a.createElement(Q,null))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[385,1,2]]]);
//# sourceMappingURL=main.117dfcba.chunk.js.map